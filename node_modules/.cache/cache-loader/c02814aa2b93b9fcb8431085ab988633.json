{"remainingRequest":"/Users/dan/Repos/spottery/node_modules/babel-loader/lib/index.js!/Users/dan/Repos/spottery/node_modules/eslint-loader/index.js??ref--12-0!/Users/dan/Repos/spottery/src/store/modules/auth.js","dependencies":[{"path":"/Users/dan/Repos/spottery/src/store/modules/auth.js","mtime":1526688021206},{"path":"/Users/dan/Repos/spottery/package.json","mtime":1526687048042},{"path":"/Users/dan/Repos/spottery/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/dan/Repos/spottery/node_modules/babel-loader/lib/index.js","mtime":1526583314000},{"path":"/Users/dan/Repos/spottery/node_modules/eslint-loader/index.js","mtime":1519638534000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.promise\";\nimport api from '../../api/spotify';\nimport qs from 'qs';\nimport { router } from '../../main';\nvar state = {\n  token: window.localStorage.getItem('spotify_token')\n};\nvar getters = {\n  isLoggedIn: function isLoggedIn(state) {\n    return !!state.token;\n  }\n};\nvar mutations = {\n  setToken: function setToken(state, token) {\n    state.token = token;\n  }\n};\nvar actions = {\n  login: function login() {\n    api.login();\n  },\n  finalizeLogin: function finalizeLogin(_ref, hash) {\n    var commit = _ref.commit;\n\n    var _qs$parse = qs.parse(hash.replace('#', '')),\n        access_token = _qs$parse.access_token;\n\n    commit('setToken', access_token);\n    window.localStorage.setItem('spotify_token', access_token);\n    router.push('/');\n  },\n  logout: function logout(_ref2) {\n    var commit = _ref2.commit;\n    commit('setToken', null);\n    window.localStorage.removeItem('spotify_token');\n  }\n};\nexport default {\n  state: state,\n  getters: getters,\n  mutations: mutations,\n  actions: actions\n};",{"version":3,"sources":["src/store/modules/auth.js"],"names":["api","qs","router","state","token","window","localStorage","getItem","getters","isLoggedIn","mutations","setToken","actions","login","finalizeLogin","hash","commit","parse","replace","access_token","setItem","push","logout","removeItem"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,mBAAhB;AACA,OAAOC,EAAP,MAAe,IAAf;AAEA,SAASC,MAAT,QAAuB,YAAvB;AAEA,IAAMC,QAAQ;AACZC,SAAOC,OAAOC,YAAP,CAAoBC,OAApB,CAA4B,eAA5B;AADK,CAAd;AAIA,IAAMC,UAAU;AACdC,cAAY;AAAA,WAAS,CAAC,CAACN,MAAMC,KAAjB;AAAA;AADE,CAAhB;AAIA,IAAMM,YAAY;AAChBC,YAAU,kBAACR,KAAD,EAAQC,KAAR,EAAkB;AAC1BD,UAAMC,KAAN,GAAcA,KAAd;AACD;AAHe,CAAlB;AAMA,IAAMQ,UAAU;AACdC,SAAO,iBAAM;AACXb,QAAIa,KAAJ;AACD,GAHa;AAIdC,iBAAe,6BAAaC,IAAb,EAAsB;AAAA,QAAnBC,MAAmB,QAAnBA,MAAmB;;AAAA,oBACVf,GAAGgB,KAAH,CAASF,KAAKG,OAAL,CAAa,GAAb,EAAkB,EAAlB,CAAT,CADU;AAAA,QAC3BC,YAD2B,aAC3BA,YAD2B;;AAEnCH,WAAO,UAAP,EAAmBG,YAAnB;AACAd,WAAOC,YAAP,CAAoBc,OAApB,CAA4B,eAA5B,EAA6CD,YAA7C;AACAjB,WAAOmB,IAAP,CAAY,GAAZ;AACD,GATa;AAUdC,UAAQ,uBAAgB;AAAA,QAAbN,MAAa,SAAbA,MAAa;AACtBA,WAAO,UAAP,EAAmB,IAAnB;AACAX,WAAOC,YAAP,CAAoBiB,UAApB,CAA+B,eAA/B;AACD;AAba,CAAhB;AAgBA,eAAe;AACbpB,cADa;AAEbK,kBAFa;AAGbE,sBAHa;AAIbE;AAJa,CAAf","sourceRoot":"/Users/dan/Repos/spottery","sourcesContent":["import api from '../../api/spotify';\nimport qs from 'qs';\n\nimport { router } from '../../main';\n\nconst state = {\n  token: window.localStorage.getItem('spotify_token')\n}\n\nconst getters = {\n  isLoggedIn: state => !!state.token\n}\n\nconst mutations = {\n  setToken: (state, token) => {\n    state.token = token;\n  }\n}\n\nconst actions = {\n  login: () => {\n    api.login();\n  },\n  finalizeLogin: ({ commit }, hash) => {\n    const { access_token } = qs.parse(hash.replace('#', ''));\n    commit('setToken', access_token);\n    window.localStorage.setItem('spotify_token', access_token);\n    router.push('/');\n  },\n  logout: ({ commit }) => {\n    commit('setToken', null);\n    window.localStorage.removeItem('spotify_token');\n  },\n}\n\nexport default {\n  state,\n  getters,\n  mutations,\n  actions\n}"]}]}