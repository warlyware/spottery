(function(t){function e(e){for(var o,s,r=e[0],c=e[1],l=e[2],m=0,f=[];m<r.length;m++)s=r[m],a[s]&&f.push(a[s][0]),a[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},a={1:0},i=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;i.push([4,0]),n()})({4:function(t,e,n){t.exports=n("Vtdi")},HyBg:function(t,e,n){"use strict";var o=n("QQo+"),a=n.n(o);a.a},JKzz:function(t,e,n){},"QQo+":function(t,e,n){},U4Ys:function(t,e,n){},V5Se:function(t,e,n){},Vtdi:function(t,e,n){"use strict";n.r(e);n("VRzm");var o=n("Kw5r"),a=n("jE9Z"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("AppHeader"),t._v(" "),n("router-view")],1)},s=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui secondary pointing menu"},[n("router-link",{staticClass:"item",attrs:{to:"/"}},[t._v("\n    Spottery\n  ")]),t._v(" "),n("div",{staticClass:"right menu"},[t.isLoggedIn?n("div",{staticClass:"horizontal"},[n("router-link",{staticClass:"item",attrs:{to:"/"}},[t._v("\n        Albums\n      ")]),t._v(" "),n("a",{staticClass:"item",on:{click:t.logout}},[t._v("\n        Logout\n      ")])],1):n("a",{staticClass:"item",on:{click:t.login}},[t._v("\n      Login\n    ")])])],1)},c=[],l=n("L2JU"),u={name:"AppHeader",methods:Object(l["b"])(["login","logout"]),computed:Object(l["c"])(["isLoggedIn"])},m=u,f=(n("HyBg"),n("KHd+")),d=Object(f["a"])(m,r,c,!1,null,"15484120",null),p=d.exports,b={name:"App",components:{AppHeader:p}},h=b,g=(n("wSqO"),Object(f["a"])(h,i,s,!1,null,"788a6200",null)),v=g.exports,_=(n("pIFo"),n("s4NR")),w=n.n(_),k="e57d1e4978b04512b596bdca2157263f",y="https://accounts.spotify.com",O="http://localhost:8080/callback",j={login:function(){var t={client_id:k,redirect_uri:O,scopes:"user-read-email",response_type:"token"};window.location="".concat(y,"/authorize?").concat(w.a.stringify(t))}},C=n("Qyje"),I=n.n(C),A={token:window.localStorage.getItem("spotify_token")},x={isLoggedIn:function(t){return!!t.token}},z={setToken:function(t,e){t.token=e}},L={login:function(){j.login()},finalizeLogin:function(t,e){var n=t.commit,o=I.a.parse(e.replace("#","")),a=o.access_token;n("setToken",a),window.localStorage.setItem("spotify_token",a),nt.push("/")},logout:function(t){var e=t.commit;e("setToken",null),window.localStorage.removeItem("spotify_token")}},S={state:A,getters:x,mutations:z,actions:L},H=(n("ls82"),n("MECJ")),E=n("vDqi"),J=n.n(E),P="http://localhost:4000",Q={albums:[]},T={allAlbums:function(t){return t.albums}},V={fetchAlbums:function(){var t=Object(H["a"])(regeneratorRuntime.mark(function t(e){var n,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,J.a.get("".concat(P,"/api/albums"));case 3:o=t.sent,n("setAlbums",o.data);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},K={setAlbums:function(t,e){return t.albums=e}},M={state:Q,getters:T,actions:V,mutations:K};o["a"].use(l["a"]);var R=new l["a"].Store({modules:{auth:S,albums:M}}),q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"ui basic modal"},[n("i",{staticClass:"close icon"}),t._v(" "),t.selected?n("div",{staticClass:"header"},[t._v("\n    "+t._s(t.selected.albumInfo.artists[0].name)+" -- "+t._s(t.selected.albumInfo.name)+"\n  ")]):t._e(),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"image"},[t.selected?n("img",{attrs:{src:t.selected.albumInfo.images[1].url,width:"album.albumInfo.images[1].width",height:"album.albumInfo.images[1].height"}}):t._e()])])]),t._v(" "),n("div",{staticClass:"ui four stackable cards container"},t._l(t.allAlbums,function(t){return n("div",{key:t._id,staticClass:"ui card"},[n("a",{staticClass:"image visible content",attrs:{href:t.albumInfo.external_urls.spotify,target:"_blank"}},[n("img",{attrs:{src:t.albumInfo.images[1].url,width:"album.albumInfo.images[1].width",height:"album.albumInfo.images[1].height"}})])])}))])},U=[],B=n("yT7P"),X={name:"AlbumList",data:function(){return{selected:null}},methods:Object(B["a"])({},Object(l["b"])(["fetchAlbums"]),{goToSpotify:function(t){console.log(t),window.open(t,"_blank")},openModal:function(t){console.log(t),this.selected=t,$(".modal").modal("show")}}),computed:Object(l["c"])(["allAlbums"]),created:function(){this.fetchAlbums()}},Y=X,D=(n("X2oO"),Object(f["a"])(Y,q,U,!1,null,"05e77b4e",null)),F=D.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("\n  Loading...\n")])},Z=[],G={name:"AuthHandler",methods:Object(l["b"])(["finalizeLogin"]),created:function(){this.finalizeLogin(window.location.hash)}},W=G,tt=(n("zn0i"),Object(f["a"])(W,N,Z,!1,null,"75f29a79",null)),et=tt.exports;n.d(e,"router",function(){return nt}),o["a"].use(a["a"]);var nt=new a["a"]({mode:"history",routes:[{path:"/",component:F},{path:"/callback",component:et}]});new o["a"]({router:nt,store:R,render:function(t){return t(v)}}).$mount("#app")},X2oO:function(t,e,n){"use strict";var o=n("V5Se"),a=n.n(o);a.a},wSqO:function(t,e,n){"use strict";var o=n("JKzz"),a=n.n(o);a.a},zn0i:function(t,e,n){"use strict";var o=n("U4Ys"),a=n.n(o);a.a}});
//# sourceMappingURL=app.9aeda1ba.js.map